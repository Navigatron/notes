
# We must only generate / delete images from a corresponding *.dot file

IMAGES=$(addsuffix .png, $(basename $(wildcard images/*.dot)))

.PHONY: images clean watch

# Build images out of all dotfiles in the images directory

images: $(IMAGES)

# Remove all *generated* images

clean:
	rm $(IMAGES)

# live update the images as changes are saved

watch:
	find . -name "*.dot" | entr -s 'dot -Tpng -o $${0%.dot}.png $$0'

# How to make a single image

images/%.png: images/%.dot
	dot -Tpng -o $@ $<
