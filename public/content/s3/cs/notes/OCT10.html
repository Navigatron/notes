<!DOCTYPE html>
<html lang=" en-US">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		
	<!-- MathJax disabled on this page -->

		


		<!--[if lt IE 9]>
			<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
		<![endif]-->
		
		<style>
			@import url('https://fonts.googleapis.com/css2?family=Arvo&family=Fira+Mono&family=Open+Sans&display=swap');
		</style>
		<link rel="stylesheet" href="/styles/index.css?v=1657689426823">

		<!-- Code Highlighting -->
		<link rel="stylesheet" href="https://raw.githubusercontent.com/PrismJS/prism-themes/master/themes/prism-one-light.css">
	</head>

	<body>
		<main>
			
			


<article>
	<p><a href="../">up</a></p>
<h1>Housekeeping</h1>
<p>Experiment 4 due Friday
Experiment 5 - The Big One - Coming out this Friday probably</p>
<ul>
<li>Exam 2
<ul>
<li>Next Wednesday, week 8</li>
<li>October 17th</li>
<li>GOL-3435</li>
<li>Review
<ul>
<li>October 15th</li>
<li>11 to noon</li>
<li>Gol 2590</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>System calls and MIPS IO</h1>
<p>System calls are how we request a service from the OS. The OS provides secure,
complex, and/or efficient services.</p>
<p><code>syscall</code> is a real instruction.</p>
<h3>Registers</h3>
<ul>
<li>v0 - which service to request</li>
<li>a0 and a1 - to pass arguments.</li>
<li>v0 contains return value if there is one.</li>
</ul>
<h3>What can we do?</h3>
<p>syscall | v0 | arg | return
---|---
print int | 1 | a0 is val to print |
print string | 4 | a0 is the string (char*) |
read int | 5 |  | v0 is val read as decimal
read string | 8 | a0 is addr of string buffer to overwrite, a1 is number of chars to read |
exit | 10 | |</p>
<p>We are encouraged to not use exit. In Java, <code>System.exit(0);</code> immediately kills all threads.</p>
<h1>Equal Directives</h1>
<p>Just like dot directives, these give instructions to the assembler about stuff.</p>
<p>They work kinda like <code>#define</code> in C.</p>
<pre><code>symbol = constant value
</code></pre>
<p>These are typically used to declare the magic numbers for syscalls.</p>
<pre><code>PRT_INT = 1
PRT_STR = 4
</code></pre>
<blockquote>
<p>And that is the last Assembly thing we will teach you.</p>
</blockquote>
<h1>IO</h1>
<h2>In the beginning</h2>
<h3>Polled IO</h3>
<p>ready flag and single byte buffer. When a key is pressed, ready flag is set and buffer populated. Program clears flag and consumes the buffer.</p>
<pre><code class="language-C">do{
	while(!ready){
		// Do Nothing
		// We spend a lot of time in here.
		// As long as there's nothing better to do,
		// this doesn't actually waste any time.
	}
	// Get Buffer
	// Clear Ready Flag
}while(/*I want more data*/);
</code></pre>
<h3>Interrupt Driven IO</h3>
<p>When the process wants IO, it's swapped out until the input is ready. This lets other things run while the user decides what key to press.</p>
<p>More on this on Friday.</p>

</article>
			
			<footer>
				<hr>
				<p>
					&copy; <a href="https://ewitherington.me">Ethan Witherington</a> 2022
				</p>
			</footer>
		</main>
	</body>

</html>